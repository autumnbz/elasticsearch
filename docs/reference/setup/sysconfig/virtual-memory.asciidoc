[[vm-max-map-count]]
=== 虚拟内存

Elasticsearch 默认使用 <<default_fs,`mmapfs`>> 目录存储索引。默认操作系统 mmap 数限制可能很低，这可能会导致内存溢出异常。

Linux 上可以用 `root` 运行以下命令提升该限制：

[source,sh]
-------------------------------------
sysctl -w vm.max_map_count=262144
-------------------------------------

更新 `/etc/sysctl.conf` 文件内的 `vm.max_map_count` 值可永久设置该值。重启后运行 `sysctl vm.max_map_count` 检验。

RPM 和 Debian 包会自动配置该值。不需要进行额外配置。
