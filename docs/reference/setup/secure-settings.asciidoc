[[secure-settings]]
=== 安全设置

有些设置是敏感的，仅仅依靠文件系统权限来保护这些值是不够的。在这种场景下，Elasticsearch 提供一个密码保护的 keystore，同时提供 `elasticsearch-keystore` 工具管理 keystore 设置。

NOTE: 应该以运行 Elasticsearch 的用户身份运行这里的所有命令。

NOTE: 只有部分设置设计为从 keystore 读取。查看文档可知道 keystore 是否支持每个设置。

NOTE: 对 keystore 的所有修改只有在重启 Elasticsearch 后才会生效。

[float]
[[creating-keystore]]
=== 创建 keystore

使用 `create` 命令创建 `elasticsearch.keystore`：

[source,sh]
----------------------------------------------------------------
bin/elasticsearch-keystore create
----------------------------------------------------------------

`elasticsearch.keystore` 文件将会与 `elasticsearch.yml` 一起创建。

[float]
[[list-settings]]
=== 列出 keystore 设置

使用 `list` 命令查看 keystore 内的设置列表：

[source,sh]
----------------------------------------------------------------
bin/elasticsearch-keystore list
----------------------------------------------------------------

[float]
[[add-string-to-keystore]]
=== 添加 string 设置

类似云插件认证凭证的敏感 string 设置，可用 `add` 命令添加：

[source,sh]
----------------------------------------------------------------
bin/elasticsearch-keystore add the.setting.name.to.set
----------------------------------------------------------------

该工具支持通过 stdin 提示输入设置值。使用 `--stdin` 标识：

[source,sh]
----------------------------------------------------------------
cat /file/containing/setting/value | bin/elasticsearch-keystore add --stdin the.setting.name.to.set
----------------------------------------------------------------

[float]
[[remove-settings]]
=== 删除设置

使用 `remove` 命令删除 keystore 设置：

[source,sh]
----------------------------------------------------------------
bin/elasticsearch-keystore remove the.setting.name.to.remove
----------------------------------------------------------------
