[[breaking_60_mappings_changes]]
=== Mapping 改变

==== 强制布尔字段

早期 Elasticsearch 将 `true` 、 `false` 、`on` 、 `off` 、 `yes` 、 `no` 、 `0` 、 `1` 识别为布尔。
Elasticsearch 6.0 中只将 `true` 和 `false` 识别为布尔，其他情况会抛出 error。
为了向前兼容，6.x 系列中上面的强制规则仍将在 pre-6.0 索引上正常工作。这意味着你不需要改变已经生效的 mappings。
然而，从现有索引模板创建违反 `boolean` 规则的新索引是不可能的。

==== `_all` 元字段默认禁用

在新的 mappings 上，包含每个字段文本拷贝的 `_all` 元字段默认禁用。早期使用 `_all` 查询的 `query_string` 和 `simple_query_string` 将校验 `_all` 是否禁用，
如果禁用 `_all` 则会转为从所有字段执行查询。使用 Elasticsearch 6.0 或更高版本将无法在创建索引时配置 `_all` 。

==== 不允许使用 `include_in_all` mapping 参数

因为 ++_all++ 字段默认禁止，并从 Elasticsearch 6.0 开始在创建索引时也不能配置，现在不允许在索引映射中设置 `include_in_all` 。

==== 无法识别 `match_mapping_type` 选项不再被忽略

早期 Elasticsearch 将忽略任何包含无法识别的 `match_mapping_type` 类型的动态模板。现在会抛出无法识别类型异常。

==== 验证日期字段 `locale`

之前 `date` 字段的 `locale` 选项允许任何字符值，同时无法识别的值将会被忽略。Elasticsearch 6.0 以后创建索引时无法识别的值将会被拒绝。
